{"componentChunkName":"component---src-templates-base-page-js","path":"/idm/v7.4/logging-and-troubleshooting-guide/07-determining-if-persistent-cache-is-out-of-sync/","result":{"data":{"pageContent":{"html":"<h1 id=\"determining-if-persistent-cache-is-out-of-sync\">Determining if Persistent Cache is Out of Sync</h1>\n<p>RadiantOne includes a command line utility to help determine if a persistent cache image is out of sync from the backends. This utility is named ldif-utils located in &#x3C;RLI_HOME>/bin/advanced and it can compare two LDIF files. The usage is shown below.</p>\n<p><code class=\"language-text\">ldif-utils -c &lt;ldif1> &lt;ldif2> [-i &lt;ignoredAttributes>] [-g true/false] [-w &lt;ldif> (to write LDIF difference)</code></p>\n<p>Certain attributes are ignored in the comparison by default (as they are specific to RadiantOne and generally not applicable). The default ignored attributes are: createtimestamp, ds-sync-generation-id, vdssynchist, entryuuid, modifiersname, cachecreatetimestamp, ds-sync-hist, ds-sync-state, creatorsname, cachemodifytimestamp, vdssynccursor, modifytimestamp, cachecreatorsname, cachemodifiersname, uuid, and vdssyncstate. If you would like to add attributes to be ignored, use the -i flag. If you would like the comparison to stop as soon as there are differences found, use -g false (-g true means the comparison continues even when differences are found). If you would like to generate a report that lists the differences between the two LDIFs, use the -w flag, including the file path.</p>\n<p>An example of how to use this utility is described below.</p>\n<ol>\n<li>\n<p>Generate an LDIF file from the persistent cache contents. An easy way to do this is with the 3rd party ldapsearch command line utility (not included with RadiantOne). An example command accessing a branch in the RadiantOne namespace that is in persistent cache (o=aggregatedview) is shown below. The output is a file named cache.ldif.</p>\n\n          <codeblockcopytag>C:\\ ldaputility&gt;ldapsearch -h localhost -p 2389 -D &quot;cn=directory manager&quot; -w password -b &quot;o=aggregatedview&quot; (objectclass=*) &gt; C:\\radiantone\\vds\\bin\\advanced\\cache.ldif</codeblockcopytag>\n          \n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">C:\\ ldaputility>ldapsearch -h localhost -p 2389 -D \"cn=directory manager\" -w password -b \"o=aggregatedview\" (objectclass=*) > C:\\radiantone\\vds\\bin\\advanced\\cache.ldif</code></pre></div>\n</li>\n<li>\n<p>Generate an LDIF file from the view of the backend (not in the cache). An easy way to do this is with the 3rd party ldapsearch command line utility (not included with RadiantOne). An example command accessing a branch in the RadiantOne namespace and bypassing the cache by prefixing the dn with “action=ignorecache” is shown below. The output is a file named nocache.ldif.</p>\n\n          <codeblockcopytag>C:\\ldaputility&gt;ldapsearch -h localhost -p 2389 -D &quot;cn=directory manager&quot; -w password -b &quot;action=ignorecache,o= aggregatedview &quot; (objectclass=*) &gt; C:\\radiantone\\vds\\bin\\advanced\\nocache.ldif</codeblockcopytag>\n          \n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">C:\\ldaputility>ldapsearch -h localhost -p 2389 -D \"cn=directory manager\" -w password -b \"action=ignorecache,o= aggregatedview \" (objectclass=*) > C:\\radiantone\\vds\\bin\\advanced\\nocache.ldif</code></pre></div>\n</li>\n<li>\n<p>Now, the LDIF files must be sorted. Use the -s flag with ldif-utils to sort the files. Examples are shown below.</p>\n<p><code class=\"language-text\">C:\\radiantone\\vds\\bin\\advanced>ldif-utils.bat -s cache.ldif</code></p>\n<p><code class=\"language-text\">Using RLI home : C:\\radiantone\\vds\r\nUsing Java home : C:\\radiantone\\vds\\jdk\\jre\r\nStart sorting...\r\nDone total entry sorted: 13\r\nDone in 80ms</code></p>\n<p><code class=\"language-text\">C:\\radiantone\\vds\\bin\\advanced>ldif-utils.bat -s nocache.ldif</code></p>\n<p>`Using RLI home : C:\\radiantone\\vds</p>\n</li>\n</ol>\n<p>Using Java home : C:\\radiantone\\vds\\jdk\\jre\r\nStart sorting...\r\nDone total entry sorted: 13\r\nDone in 79ms`</p>\n<ol start=\"4\">\n<li>\n<p>After sorting, you will have <code class=\"language-text\">&lt;filename></code>.ldif.sorted for each file. E.g. cache.ldif.sorted and nocache.ldif.sorted. These are the files to compare. Below is an example of the command to issue to compare the LDIF files:</p>\n\n          <codeblockcopytag>C:\\radiantone\\vds\\bin\\advanced&gt;ldif-utils.bat -c cache.ldif.sorted nocache.ldif.sorted -i userPassword -g true -w c:/radiantone/vds/vds_server/ldif/export/LDIFReport.ldif</codeblockcopytag>\n          \n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">C:\\radiantone\\vds\\bin\\advanced>ldif-utils.bat -c cache.ldif.sorted nocache.ldif.sorted -i userPassword -g true -w c:/radiantone/vds/vds_server/ldif/export/LDIFReport.ldif</code></pre></div>\n<p><code class=\"language-text\">Using RLI home : C:\\radiantone\\vds\r\nUsing Java home : C:\\radiantone\\vds\\jdk\\jre\r\nStart comparison...\r\nLdif comparison done on 13 entries - result=true\r\nDone in 57ms</code></p>\n</li>\n</ol>\n<p>The example result shown above (result=true) indicates that the two LDIF files are equal and hence the persistent cache is in sync with the backend data sources. If the two LDIF files were not equal (result=false), the result would indicate the DN for the entries that are different. Below is an example of a result when one entry between the two compared files is different:</p>\n<p><code class=\"language-text\">Start comparison...\r\n!= Difference found on uid=logan_oliver@radiant.com,o=adaggregation\r\nLdif comparison done on 13 entries - result=false\r\nDone in 55ms</code></p>\n<p>If there are many differences found between the persistent cache image and the backend data sources, it is generally best to reinitialize the persistent cache. If there are not many differences, it can be helpful to go through the RadiantOne service <a href=\"03-radiantone-universal-directory.md#radiantone-server-log\">log files</a> and the connector log files (if real-time refresh is used) in addition to checking the cn=cacherefreshlog naming context in RadiantOne to see if you can determine the cause of the persistent cache not being updated.</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{"id":"determining-if-persistent-cache-is-out-of-sync"},"children":[{"type":"text","value":"Determining if Persistent Cache is Out of Sync"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"RadiantOne includes a command line utility to help determine if a persistent cache image is out of sync from the backends. This utility is named ldif-utils located in <RLI_HOME>/bin/advanced and it can compare two LDIF files. The usage is shown below."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ldif-utils -c <ldif1> <ldif2> [-i <ignoredAttributes>] [-g true/false] [-w <ldif> (to write LDIF difference)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Certain attributes are ignored in the comparison by default (as they are specific to RadiantOne and generally not applicable). The default ignored attributes are: createtimestamp, ds-sync-generation-id, vdssynchist, entryuuid, modifiersname, cachecreatetimestamp, ds-sync-hist, ds-sync-state, creatorsname, cachemodifytimestamp, vdssynccursor, modifytimestamp, cachecreatorsname, cachemodifiersname, uuid, and vdssyncstate. If you would like to add attributes to be ignored, use the -i flag. If you would like the comparison to stop as soon as there are differences found, use -g false (-g true means the comparison continues even when differences are found). If you would like to generate a report that lists the differences between the two LDIFs, use the -w flag, including the file path."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"An example of how to use this utility is described below."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Generate an LDIF file from the persistent cache contents. An easy way to do this is with the 3rd party ldapsearch command line utility (not included with RadiantOne). An example command accessing a branch in the RadiantOne namespace that is in persistent cache (o=aggregatedview) is shown below. The output is a file named cache.ldif."}]},{"type":"text","value":"\n\n          "},{"type":"element","tagName":"codeblockcopytag","properties":{},"children":[{"type":"text","value":"C:\\ ldaputility>ldapsearch -h localhost -p 2389 -D \"cn=directory manager\" -w password -b \"o=aggregatedview\" (objectclass=*) > C:\\radiantone\\vds\\bin\\advanced\\cache.ldif"}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"C:\\ ldaputility>ldapsearch -h localhost -p 2389 -D \"cn=directory manager\" -w password -b \"o=aggregatedview\" (objectclass=*) > C:\\radiantone\\vds\\bin\\advanced\\cache.ldif"}]}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Generate an LDIF file from the view of the backend (not in the cache). An easy way to do this is with the 3rd party ldapsearch command line utility (not included with RadiantOne). An example command accessing a branch in the RadiantOne namespace and bypassing the cache by prefixing the dn with “action=ignorecache” is shown below. The output is a file named nocache.ldif."}]},{"type":"text","value":"\n\n          "},{"type":"element","tagName":"codeblockcopytag","properties":{},"children":[{"type":"text","value":"C:\\ldaputility>ldapsearch -h localhost -p 2389 -D \"cn=directory manager\" -w password -b \"action=ignorecache,o= aggregatedview \" (objectclass=*) > C:\\radiantone\\vds\\bin\\advanced\\nocache.ldif"}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"C:\\ldaputility>ldapsearch -h localhost -p 2389 -D \"cn=directory manager\" -w password -b \"action=ignorecache,o= aggregatedview \" (objectclass=*) > C:\\radiantone\\vds\\bin\\advanced\\nocache.ldif"}]}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now, the LDIF files must be sorted. Use the -s flag with ldif-utils to sort the files. Examples are shown below."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"C:\\radiantone\\vds\\bin\\advanced>ldif-utils.bat -s cache.ldif"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Using RLI home : C:\\radiantone\\vds\nUsing Java home : C:\\radiantone\\vds\\jdk\\jre\nStart sorting...\nDone total entry sorted: 13\nDone in 80ms"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"C:\\radiantone\\vds\\bin\\advanced>ldif-utils.bat -s nocache.ldif"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"`Using RLI home : C:\\radiantone\\vds"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Using Java home : C:\\radiantone\\vds\\jdk\\jre\r\nStart sorting...\r\nDone total entry sorted: 13\r\nDone in 79ms`"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{"start":4},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After sorting, you will have "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"<filename>"}]},{"type":"text","value":".ldif.sorted for each file. E.g. cache.ldif.sorted and nocache.ldif.sorted. These are the files to compare. Below is an example of the command to issue to compare the LDIF files:"}]},{"type":"text","value":"\n\n          "},{"type":"element","tagName":"codeblockcopytag","properties":{},"children":[{"type":"text","value":"C:\\radiantone\\vds\\bin\\advanced>ldif-utils.bat -c cache.ldif.sorted nocache.ldif.sorted -i userPassword -g true -w c:/radiantone/vds/vds_server/ldif/export/LDIFReport.ldif"}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"C:\\radiantone\\vds\\bin\\advanced>ldif-utils.bat -c cache.ldif.sorted nocache.ldif.sorted -i userPassword -g true -w c:/radiantone/vds/vds_server/ldif/export/LDIFReport.ldif"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Using RLI home : C:\\radiantone\\vds\nUsing Java home : C:\\radiantone\\vds\\jdk\\jre\nStart comparison...\nLdif comparison done on 13 entries - result=true\nDone in 57ms"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The example result shown above (result=true) indicates that the two LDIF files are equal and hence the persistent cache is in sync with the backend data sources. If the two LDIF files were not equal (result=false), the result would indicate the DN for the entries that are different. Below is an example of a result when one entry between the two compared files is different:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Start comparison...\n!= Difference found on uid=logan_oliver@radiant.com,o=adaggregation\nLdif comparison done on 13 entries - result=false\nDone in 55ms"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If there are many differences found between the persistent cache image and the backend data sources, it is generally best to reinitialize the persistent cache. If there are not many differences, it can be helpful to go through the RadiantOne service "},{"type":"element","tagName":"a","properties":{"href":"03-radiantone-universal-directory.md#radiantone-server-log"},"children":[{"type":"text","value":"log files"}]},{"type":"text","value":" and the connector log files (if real-time refresh is used) in addition to checking the cn=cacherefreshlog naming context in RadiantOne to see if you can determine the cause of the persistent cache not being updated."}]}],"data":{"quirksMode":false}},"fileAbsolutePath":"/home/runner/work/developer-site/developer-site/.cache/gatsby-source-git/idm/v7.4/documentation/logging-and-troubleshooting-guide/07-determining-if-persistent-cache-is-out-of-sync.md","frontmatter":{"title":"Logging and Troubleshooting"},"headings":[{"id":"determining-if-persistent-cache-is-out-of-sync","value":"Determining if Persistent Cache is Out of Sync","depth":1}]},"toc":{"html":"<ul>\n<li><a href=\"01-overview.md\">Overview</a></li>\n<li><a href=\"02-control-panels-and-configuration-tools.md\">Control Panels and Configuration Tools</a></li>\n<li><a href=\"03-radiantone-universal-directory.md\">Radiant Universal Directory and Federated Identity Service</a></li>\n<li><a href=\"04-zookeeper.md\">Zookeeper</a></li>\n<li><a href=\"05-global-synchronization.md\">Global Synchronization</a></li>\n<li><a href=\"06-task-scheduler-and-tasks.md\">Task Scheduler and Tasks</a></li>\n<li><a href=\"07-determining-if-persistent-cache-is-out-of-sync.md\">Determining if Persistent Cache Is Out of Sync</a></li>\n<li><a href=\"08-custom-logging.md\">Custom Logging</a></li>\n<li><a href=\"09-audit-logging.md\">Audit Logging</a></li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"01-overview.md"},"children":[{"type":"text","value":"Overview"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"02-control-panels-and-configuration-tools.md"},"children":[{"type":"text","value":"Control Panels and Configuration Tools"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"03-radiantone-universal-directory.md"},"children":[{"type":"text","value":"Radiant Universal Directory and Federated Identity Service"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"04-zookeeper.md"},"children":[{"type":"text","value":"Zookeeper"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"05-global-synchronization.md"},"children":[{"type":"text","value":"Global Synchronization"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"06-task-scheduler-and-tasks.md"},"children":[{"type":"text","value":"Task Scheduler and Tasks"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"07-determining-if-persistent-cache-is-out-of-sync.md"},"children":[{"type":"text","value":"Determining if Persistent Cache Is Out of Sync"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"08-custom-logging.md"},"children":[{"type":"text","value":"Custom Logging"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"09-audit-logging.md"},"children":[{"type":"text","value":"Audit Logging"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"fileAbsolutePath":"/home/runner/work/developer-site/developer-site/.cache/gatsby-source-git/idm/v7.4/documentation/logging-and-troubleshooting-guide/TOC.md","frontmatter":{"title":"Logging and Troubleshooting"}}},"pageContext":{"urlPrefix":"idm/v7.4","absolutePath":"/home/runner/work/developer-site/developer-site/.cache/gatsby-source-git/idm/v7.4/documentation/logging-and-troubleshooting-guide/07-determining-if-persistent-cache-is-out-of-sync.md","tocRegex":"/(idm/)(v7.4/)?(documentation/)?(logging-and-troubleshooting-guide/)?(07-determining-if-persistent-cache-is-out-of-sync.md/)?(TOC.md)/ig","versions":[{"name":"v8.1","displayName":"v8.1"},{"name":"v8.0","displayName":"v8.0"},{"name":"v7.4","displayName":"v7.4"}],"currentRepo":{"name":"idm","displayName":"Identity Data Management","description":"Integrates identity data: contextual, dynamic, and consistent data for administrative and access decisions.","links":[{"text":"SEE ADMIN DOCUMENTATION","href":"/idm/v8.1/#0"},{"text":"SEE DEVELOPER DOCUMENTATION","href":"/idm/v8.1/#1"}],"remote":"https://github.com/radiantlogic-v8/documentation-new.git","patterns":["home-pages/**","documentation/**","javadoc/**"],"deployBranches":[{"name":"v8.1","displayName":"v8.1"},{"name":"v8.0","displayName":"v8.0"},{"name":"v7.4","displayName":"v7.4"}]},"currentRepoWebLink":"https://github.com/radiantlogic-v8/documentation-new","currentVersion":{"name":"v7.4","displayName":"v7.4"},"title":"Logging and Troubleshooting","description":"Logging and Troubleshooting","tocForCurrentSection":{"textElement":"Logging and troubleshooting guide","href":null,"children":[{"textElement":"Overview","href":"logging-and-troubleshooting-guide/01-overview","children":[]},{"textElement":"Control panels and configuration tools","href":"logging-and-troubleshooting-guide/02-control-panels-and-configuration-tools","children":[]},{"textElement":"Radiantone universal directory","href":"logging-and-troubleshooting-guide/03-radiantone-universal-directory","children":[]},{"textElement":"Zookeeper","href":"logging-and-troubleshooting-guide/04-zookeeper","children":[]},{"textElement":"Global synchronization","href":"logging-and-troubleshooting-guide/05-global-synchronization","children":[]},{"textElement":"Task scheduler and tasks","href":"logging-and-troubleshooting-guide/06-task-scheduler-and-tasks","children":[]},{"textElement":"Audit logging","href":"logging-and-troubleshooting-guide/07-audit-logging","children":[]},{"textElement":"Determining if persistent cache is out of sync","href":"logging-and-troubleshooting-guide/07-determining-if-persistent-cache-is-out-of-sync","children":[]},{"textElement":"Custom logging","href":"logging-and-troubleshooting-guide/08-custom-logging","children":[]},{"textElement":"Audit logging","href":"logging-and-troubleshooting-guide/09-audit-logging","children":[]},{"textElement":"T O C","href":"logging-and-troubleshooting-guide/TOC","children":[]}]}}},"staticQueryHashes":["63159454"],"slicesMap":{"footer":"footer","header":"header"}}