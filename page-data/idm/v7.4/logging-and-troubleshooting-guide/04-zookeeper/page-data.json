{"componentChunkName":"component---src-templates-base-page-js","path":"/idm/v7.4/logging-and-troubleshooting-guide/04-zookeeper/","result":{"data":{"pageContent":{"html":"<h1 id=\"zookeeper\">ZooKeeper</h1>\n<p>Log file name: Zookeeper-<N>.log contains internal server details regarding the operations performed by Zookeeper.</p>\n<p>The log location for ZooKeeper (deployed internal/local to the RadiantOne nodes) is: &#x3C;RLI_HOME>\\logs\\zookeeper. The rollover logs are also located at this location. Rollover file size (default of 100MB) and location are configured in: &#x3C;RLI_HOME>/config/logging/log4j2-zookeeper-server.json.</p>\n<p>The log location for external ZooKeeper ensemble logs is: &#x3C;rli-zookeeper-external_install-path>\\zookeeper\\logs. The rollover logs are located in C:\\rli-zookeeper-external\\bin\\logs\\ for Windows deployments and rli-zookeeper-external/logs/ on Linux deployments. Rollover file size and location are configured in: <rli-zookeeper-external>/zookeeper/conf/log4j2.xml.</p>\n<h2 id=\"read-only-mode\">Read Only Mode</h2>\n<p>In a cluster, when ZooKeeper loses contact with over half of the other ZooKeeper servers in the ensemble, it enters a read-only mode. This allows the RadiantOne service to continue to process search operations even when the ZooKeeper quorum is lost. However, the RadiantOne service denies any write operations by returning LDAP error code 53: Unwilling to Perform to the client. Also, no configuration changes can be made while ZooKeeper is in read-only mode. Administrators can log into the Control Panel during this time but will be unable to make configuration changes. If an administrator is logged into the Control Panel when ZooKeeper enters read-only mode, a warning message appears at the top and no configuration changes are allowed.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 171px; z-index: -1\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.409356725146203%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHahNAf/8QAFRABAQAAAAAAAAAAAAAAAAAAABH/2gAIAQEAAQUCiI//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAXEAADAQAAAAAAAAAAAAAAAAAAAYFh/9oACAEBAAE/IW2EEH//2gAMAwEAAgADAAAAEHvv/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EIiI/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8Qqv/EABoQAAICAwAAAAAAAAAAAAAAAAERAFFhkaH/2gAIAQEAAT8QYKC5JjV1GrYz/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"An image showing \"\n        title=\"\"\n        src=\"/static/06b3c8268d4bb6913aeaef92d92ec1ae/f777c/Image4.1.jpg\"\n        srcset=\"/static/06b3c8268d4bb6913aeaef92d92ec1ae/f777c/Image4.1.jpg 171w\"\n        sizes=\"(max-width: 171px) 100vw, 171px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Figure 1: Warning Indicating ZooKeeper Entered Read-only Mode</p>\n<p>To recover from ZooKeeper read-only mode, make sure ZooKeeper is restarted on more than half of the cluster nodes. Once the quorum is reestablished, the RadiantOne cluster recovers automatically.</p>\n<blockquote>\n<p>[!note] As an alternative to the default read-only mode, ZooKeeper can be configured for SHUTDOWN mode when the quorum is lost. In this case, the RadiantOne service on all cluster nodes shuts down. If this behavior is preferable, set <span style=\"color:lightblue\">\"onZkWriteLossVdsServerBehavior\"</span> : \"SHUTDOWN\", for the /radiantone/v1/cluster/config/vds_server.conf node on the Main Control Panel > ZooKeeper tab. For more information, see the RadiantOne Deployment and Tuning Guide.</p>\n</blockquote>\n<p> </p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{"id":"zookeeper"},"children":[{"type":"text","value":"ZooKeeper"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Log file name: Zookeeper-"},{"type":"element","tagName":"n","properties":{},"children":[{"type":"text","value":".log contains internal server details regarding the operations performed by Zookeeper."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The log location for ZooKeeper (deployed internal/local to the RadiantOne nodes) is: <RLI_HOME>\\logs\\zookeeper. The rollover logs are also located at this location. Rollover file size (default of 100MB) and location are configured in: <RLI_HOME>/config/logging/log4j2-zookeeper-server.json."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The log location for external ZooKeeper ensemble logs is: <rli-zookeeper-external_install-path>\\zookeeper\\logs. The rollover logs are located in C:\\rli-zookeeper-external\\bin\\logs\\ for Windows deployments and rli-zookeeper-external/logs/ on Linux deployments. Rollover file size and location are configured in: "},{"type":"element","tagName":"rli-zookeeper-external","properties":{},"children":[{"type":"text","value":"/zookeeper/conf/log4j2.xml."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"read-only-mode"},"children":[{"type":"text","value":"Read Only Mode"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In a cluster, when ZooKeeper loses contact with over half of the other ZooKeeper servers in the ensemble, it enters a read-only mode. This allows the RadiantOne service to continue to process search operations even when the ZooKeeper quorum is lost. However, the RadiantOne service denies any write operations by returning LDAP error code 53: Unwilling to Perform to the client. Also, no configuration changes can be made while ZooKeeper is in read-only mode. Administrators can log into the Control Panel during this time but will be unable to make configuration changes. If an administrator is logged into the Control Panel when ZooKeeper enters read-only mode, a warning message appears at the top and no configuration changes are allowed."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 171px; z-index: -1"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 30.409356725146203%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHahNAf/8QAFRABAQAAAAAAAAAAAAAAAAAAABH/2gAIAQEAAQUCiI//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAXEAADAQAAAAAAAAAAAAAAAAAAAYFh/9oACAEBAAE/IW2EEH//2gAMAwEAAgADAAAAEHvv/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EIiI/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8Qqv/EABoQAAICAwAAAAAAAAAAAAAAAAERAFFhkaH/2gAIAQEAAT8QYKC5JjV1GrYz/9k='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"An image showing ","title":"","src":"/static/06b3c8268d4bb6913aeaef92d92ec1ae/f777c/Image4.1.jpg","srcSet":["/static/06b3c8268d4bb6913aeaef92d92ec1ae/f777c/Image4.1.jpg 171w"],"sizes":"(max-width: 171px) 100vw, 171px","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy","decoding":"async"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Figure 1: Warning Indicating ZooKeeper Entered Read-only Mode"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To recover from ZooKeeper read-only mode, make sure ZooKeeper is restarted on more than half of the cluster nodes. Once the quorum is reestablished, the RadiantOne cluster recovers automatically."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"[!note] As an alternative to the default read-only mode, ZooKeeper can be configured for SHUTDOWN mode when the quorum is lost. In this case, the RadiantOne service on all cluster nodes shuts down. If this behavior is preferable, set "},{"type":"element","tagName":"span","properties":{"style":"color:lightblue"},"children":[{"type":"text","value":"\"onZkWriteLossVdsServerBehavior\""}]},{"type":"text","value":" : \"SHUTDOWN\", for the /radiantone/v1/cluster/config/vds_server.conf node on the Main Control Panel > ZooKeeper tab. For more information, see the RadiantOne Deployment and Tuning Guide."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":" "}]}],"data":{"quirksMode":false}},"fileAbsolutePath":"/home/runner/work/developer-site/developer-site/.cache/gatsby-source-git/idm/v7.4/documentation/logging-and-troubleshooting-guide/04-zookeeper.md","frontmatter":{"title":"Logging and Troubleshooting"},"headings":[{"id":"zookeeper","value":"ZooKeeper","depth":1},{"id":"read-only-mode","value":"Read Only Mode","depth":2}]},"toc":{"html":"<ul>\n<li><a href=\"01-overview.md\">Overview</a></li>\n<li><a href=\"02-control-panels-and-configuration-tools.md\">Control Panels and Configuration Tools</a></li>\n<li><a href=\"03-radiantone-universal-directory.md\">Radiant Universal Directory and Federated Identity Service</a></li>\n<li><a href=\"04-zookeeper.md\">Zookeeper</a></li>\n<li><a href=\"05-global-synchronization.md\">Global Synchronization</a></li>\n<li><a href=\"06-task-scheduler-and-tasks.md\">Task Scheduler and Tasks</a></li>\n<li><a href=\"07-determining-if-persistent-cache-is-out-of-sync.md\">Determining if Persistent Cache Is Out of Sync</a></li>\n<li><a href=\"08-custom-logging.md\">Custom Logging</a></li>\n<li><a href=\"09-audit-logging.md\">Audit Logging</a></li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"01-overview.md"},"children":[{"type":"text","value":"Overview"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"02-control-panels-and-configuration-tools.md"},"children":[{"type":"text","value":"Control Panels and Configuration Tools"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"03-radiantone-universal-directory.md"},"children":[{"type":"text","value":"Radiant Universal Directory and Federated Identity Service"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"04-zookeeper.md"},"children":[{"type":"text","value":"Zookeeper"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"05-global-synchronization.md"},"children":[{"type":"text","value":"Global Synchronization"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"06-task-scheduler-and-tasks.md"},"children":[{"type":"text","value":"Task Scheduler and Tasks"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"07-determining-if-persistent-cache-is-out-of-sync.md"},"children":[{"type":"text","value":"Determining if Persistent Cache Is Out of Sync"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"08-custom-logging.md"},"children":[{"type":"text","value":"Custom Logging"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"09-audit-logging.md"},"children":[{"type":"text","value":"Audit Logging"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"fileAbsolutePath":"/home/runner/work/developer-site/developer-site/.cache/gatsby-source-git/idm/v7.4/documentation/logging-and-troubleshooting-guide/TOC.md","frontmatter":{"title":"Logging and Troubleshooting"}}},"pageContext":{"urlPrefix":"idm/v7.4","absolutePath":"/home/runner/work/developer-site/developer-site/.cache/gatsby-source-git/idm/v7.4/documentation/logging-and-troubleshooting-guide/04-zookeeper.md","tocRegex":"/(idm/)(v7.4/)?(documentation/)?(logging-and-troubleshooting-guide/)?(04-zookeeper.md/)?(TOC.md)/ig","versions":[{"name":"v8.1","displayName":"v8.1"},{"name":"v8.0","displayName":"v8.0"},{"name":"v7.4","displayName":"v7.4"}],"currentRepo":{"name":"idm","displayName":"Identity Data Management","description":"Integrates identity data: contextual, dynamic, and consistent data for administrative and access decisions.","links":[{"text":"SEE ADMIN DOCUMENTATION","href":"/idm/v8.1/#0"},{"text":"SEE DEVELOPER DOCUMENTATION","href":"/idm/v8.1/#1"}],"remote":"https://github.com/radiantlogic-v8/documentation-new.git","patterns":["home-pages/**","documentation/**","javadoc/**"],"deployBranches":[{"name":"v8.1","displayName":"v8.1"},{"name":"v8.0","displayName":"v8.0"},{"name":"v7.4","displayName":"v7.4"}]},"currentRepoWebLink":"https://github.com/radiantlogic-v8/documentation-new","currentVersion":{"name":"v7.4","displayName":"v7.4"},"title":"Logging and Troubleshooting","description":"Logging and Troubleshooting","tocForCurrentSection":{"textElement":"Logging and troubleshooting guide","href":null,"children":[{"textElement":"Overview","href":"logging-and-troubleshooting-guide/01-overview","children":[]},{"textElement":"Control panels and configuration tools","href":"logging-and-troubleshooting-guide/02-control-panels-and-configuration-tools","children":[]},{"textElement":"Radiantone universal directory","href":"logging-and-troubleshooting-guide/03-radiantone-universal-directory","children":[]},{"textElement":"Zookeeper","href":"logging-and-troubleshooting-guide/04-zookeeper","children":[]},{"textElement":"Global synchronization","href":"logging-and-troubleshooting-guide/05-global-synchronization","children":[]},{"textElement":"Task scheduler and tasks","href":"logging-and-troubleshooting-guide/06-task-scheduler-and-tasks","children":[]},{"textElement":"Audit logging","href":"logging-and-troubleshooting-guide/07-audit-logging","children":[]},{"textElement":"Determining if persistent cache is out of sync","href":"logging-and-troubleshooting-guide/07-determining-if-persistent-cache-is-out-of-sync","children":[]},{"textElement":"Custom logging","href":"logging-and-troubleshooting-guide/08-custom-logging","children":[]},{"textElement":"Audit logging","href":"logging-and-troubleshooting-guide/09-audit-logging","children":[]},{"textElement":"T O C","href":"logging-and-troubleshooting-guide/TOC","children":[]}]}}},"staticQueryHashes":["63159454"],"slicesMap":{"footer":"footer","header":"header"}}