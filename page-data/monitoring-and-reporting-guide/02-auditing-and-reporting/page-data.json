{"componentChunkName":"component---src-templates-base-page-js","path":"/monitoring-and-reporting-guide/02-auditing-and-reporting","result":{"data":{"pageContent":{"html":"<!--\r\n# Chapter 2: Auditing and Reporting\r\n\r\nReports are a key tool for monitoring the health of the RadiantOne service and should be\r\ngenerated frequently to understand the performance and load on the server and audit the\r\nactivity (who is doing what and when). RadiantOne includes three default types of basic reports:\r\nAccess, Audit and Group Audit. This section describes the report settings, content of these\r\nreports, and recommendations on report usage.\r\n\r\n## Recommendations for Auditing and Reporting\r\n\r\nThere are four recommendations for auditing and reporting:\r\n\r\n- To analyze/debug a problem\r\n- To periodically monitor the health of the RadiantOne service\r\n- To audit client activity of RadiantOne (who is connecting, doing what, and when)\r\n- To audit configuration changes to RadiantOne\r\n\r\nThe following sections describe each recommendation in more details.\r\n\r\n>[!warning] The scenarios provided below are general guidelines and entirely optional. You should generate reports as often as required for your deployment.\r\n\r\n### Analyzing Problems\r\n\r\nIf consumers of the RadiantOne service are experiencing problems (time-consuming logins, expected information not being returned...etc.), the access report can be helpful in pinpointing what is happening on the server and diagnosing the problem.\r\n\r\nThe instructions in this section assume the following:\r\n\r\n- The RadiantOne server log level has been set to a minimum of Info.\r\n- The access log content is relevant (captures the period of time where consumers are seeing issues).\r\n- All operations are configured to be included in the report.\r\n- RadiantOne is configured to log to CSV (on the Settings Tab > Logs section > Server Logs, make sure the CSV Output format option is checked on the right side).\r\n\r\n#### Starting the Log to Database Utility\r\n\r\nThe Log2DB settings can be managed from the Main Control Panel > Settings Tab > Reporting Section > Log2DB Settings sub-section.\r\n\r\nAfter confirming the proper configuration, start the Log2DB Utility. On Windows platforms,\r\nexecute <RLI_HOME>/bin/runAccessLog2DB.bat <path to AccessLog2DBconfig.properties\r\nfile>. On UNIX platforms, execute runAccessLog2DB.sh <path to\r\nAccessLog2DBconfig.properties file>. The AccessLog2DBconfig.properties file is in\r\n<RLI_HOME>/config/log2db.\r\n\r\nThe Log2DB utility writes the access log information into a database. After, generate the Access Report from the Main Control Panel -> Settings Tab -> Reporting section -> Access Log Report sub-section. On the right side, click on the Generate Report button. The report can be found in the location indicated in the Output Location parameter which is <RLI_HOME>/reporting-birt/reports by default. If RadiantOne is deployed in a cluster, you can generate a single report that aggregates statistics from all nodes in the cluster. For more information on configuring and generating an Access Log report, see [Access Log Report Settings](#access-log-report-settings) and [Access Log Report](#access-log-report).\r\n\r\nThe summary section provides you with valuable information regarding how long operations are\r\ntaking and a summary of error codes found. In the detailed section of the report, you will find\r\nspecific entries from the log that match either a certain error code and/or exceed a response\r\ntime threshold. This information can be the starting point for further investigation and pinpoints\r\nthe location in the access log (by searching for the exact connection and operation numbers\r\nassociated with a specific operation) where the issue occurred. Sometimes, examining the\r\nactivity prior to an error can help in determining the cause of a problem.\r\n\r\n### Monitoring the Health of the RadiantOne Service\r\n\r\nIt is typically recommended to monitor the health of the RadiantOne service over a one week period at least once a month. Pay close attention to the configured access log rotation schedule\r\nto ensure no log content is missed (if applicable for your reports). The access log can be configured to roll over based on a configured size.\r\n\r\nAt the end of the reporting period, you can generate the Access Report from the Main Control Panel > Settings Tab > Reporting section > Access Log Report sub-section. On the right side,\r\nclick the Generate Report button. The report can be found in the location indicated in the Output Location parameter which is <RLI_HOME>/reporting-birt/reports by default.\r\n\r\nThe summary section provides you with valuable information regarding how long operations are\r\ntaking and a summary of error codes found. If these numbers are not as expected, they may\r\nindicate areas where tuning is required. In the detailed section of the report, you will find specific\r\nentries from the log that match either a certain error code and/or exceed a response time\r\nthreshold. With this information, you can search the exact log file location for more information\r\nabout the request that exceeded the response time. For example, if search operations are\r\nconsistently slow to respond against a certain branch in the RadiantOne namespace this could\r\nindicate that a cache should be configured for this branch.\r\n\r\n### Auditing RadiantOne Configuration Changes\r\n\r\nTo log configuration changes made through command line, using the vdsconfig utility, enable\r\nconfig logging with the following steps:\r\n\r\n\r\n>[!warning] these steps require downtime since all services must be stopped. If RadiantOne is deployed in a cluster, perform the following steps on each node.\r\n\r\n1. Stop all RadiantOne services including ZooKeeper.\r\n2. Edit <RLI_HOME>\\config\\advanced\\features.properties and set:\r\n    vdsconfig.logging.enabled=true\r\n3. Restart ZooKeeper.\r\n4. Restart all needed RadiantOne services.\r\n\r\nConfiguration changes are logged in: <RLI_HOME>/logs/vdsconfig.log\r\n\r\n### Auditing RadiantOne Client Activity\r\n\r\nIt is typically recommended to audit RadiantOne client activity over a one-week period at least once a month.\r\n\r\nPay close attention to the configured access log rotation schedule to ensure no log content is missed (if applicable for your reports). The access log may be configured to roll over based on a\r\nconfigured size.\r\n\r\nYou can generate the Audit Report from the Main Control Panel > Settings Tab > Reporting section > Audit Report sub-section. On the right side, click the Generate Report button. The\r\nreport can be found in the location indicated in the Output Location parameter which is <RLI_HOME>/reporting-birt/reports by default. If RadiantOne is deployed in a cluster, you can\r\ngenerate a single report that aggregates statistics from all nodes in the cluster. For more information on configuring and generating an audit report, see [Audit Report Settings](#audit-report-settings) and [Audit Report](#audit-report).\r\n\r\n>[!warning] you can also audit user activity and have the report sorted by\r\ngroups. The [Group Audit Report](#group-audit-report) is similar in output to the Audit Report. The only difference being the report categorizes user activity based on groups.\r\n\r\nThe session information is listed at the top of a section followed by the user DN that performed\r\nthe operations. Next to the user DN is a table consisting of all types of operations performed by\r\nthe user in addition to the total number of times that type of operation was performed. This\r\ninformation allows you to monitor who is accessing the RadiantOne service and when, in\r\naddition to what operations they are performing. This can help pinpoint undesirable access.\r\n\r\n### Maintaining the Log Database\r\n\r\nIt is important to note that there is no built-in maintenance of the log database. The database\r\nadministrator responsible for the database chosen to store the log content should maintain the\r\ndatabase table as needed (the amount of log content stored in the database depends on\r\nfrequency the Log2DB utility is run and the activity against RadiantOne). This includes things\r\nlike sizing the table properly for log history it should store, clearing the old log content from the\r\ntable when it is no longer needed...etc.\r\n\r\n>[!note] For assistance with establishing log maintenance and a reporting program, please contact Radiant Logic for professional services.\r\n\r\n## Configuration\r\n\r\nThe reports are built on top of the capability of RadiantOne to store the access log content into a\r\ndatabase table. RadiantOne uses a separate utility named Log2DB to log into a database. There are four configuration settings that need to be considered. The [Log2DB settings](#log2db-settings), the [Access Report settings](#access-log-report-settings), the [Audit Report settings](#audit-report-settings), and the [Group Audit Report settings](#group-audit-report-settings). These are described in this section.\r\n\r\n>[!warning] the database associated with the Log2DB settings must be running in order start the Log2DB Utility.\r\n\r\n### Log2DB Settings\r\n\r\nThe database that houses the table which contains the RadiantOne access log content may be in any database server you choose. The default settings leverage a Derby database that is\r\nincluded with RadiantOne. These settings are described below and are located on the Main Control Panel > Settings Tab > Reporting section > [Log2DB Settings](#log2db-settings) sub-section.\r\n\r\n>[!warning] if you plan on using the RadiantOne [default report generation](#generating-reports),\r\nthen the log2db database must be Microsoft SQL Server, Oracle, Derby or PostgreSQL.\r\n\r\nThe default configuration file for logging to a database is:\r\n<RLI_HOME>/config/log2db/AccessLog2DBconfig.properties\r\n\r\nThis properties file contains the connection information to the database where you want to store\r\nthe log table and the settings are described below.\r\n\r\nDatabase Settings\r\nThe following settings are related to the database that stores the table containing the access log\r\ncontents.\r\n\r\n- **Database Datasource**\r\n<br>The name of the data source associated with the database server that will store the log content.\r\n- Table Name\r\n<br>The table name that will store the log contents.\r\n- Mode (either Truncate or Append)\r\n<br>When you start the log process, if you are in truncate mode, it empties the contents of the log table before anything new gets added. If you are using append mode, then the new log content is appended at the end of the table (rows are added).\r\n- Table Creation\r\n<br>Enter the appropriate create table syntax for the type of database you want to use. If you want to create the table on your own, then you can leave this parameter blank.\r\n\r\n>[!warning] By default, the FILTER field in the table only allows 255 characters. If you are expecting client queries containing filters longer than 255 characters, edit the length accordingly in the create table statement and recreate the log table. Otherwise, any request from clients containing a filter longer than 255 characters is not logged into the database table by RadiantOne.\r\n\r\n- Testing the Connection\r\n<br>Click the Test Connection button to verify the connection to the database is working.\r\n- Creating the Table\r\nIf the table that will store the access log content does not exist, use the Create Table Button to create it. Verify that the create table statement listed in the Table Creation parameter is accurate. You can also execute\r\n<RLI_HOME>\\bin\\advanced\\runCreateAccessLogTable.bat\r\n(runCreateAccessLogTable.sh on UNIX) to create the log table in the database.\r\n- Index Creation\r\n<br>To create the indexes for the log table, click the Create Index button.\r\n- Emptying the Table\r\n<br>To delete the contents of the log table, click the Empty Table button.\r\n- Dropping the Table\r\n<br>To delete the log table itself, click the Drop Table button\r\n\r\nRules\r\n\r\nThe rules associated with logging to the database can be seen in the <RLI_HOME>/config/log2db/AccessLog2DBconfig.properties file and are based on regular expression.\r\n\r\n- Mapping – indicates the format of the log that is parsed and reported on.\r\n- Pattern – indicates the regular expression that is associated with the mapping.\r\n\r\nLog Output Format\r\n\r\nOn the Main Control Panel > Settings tab > Logs section, select Access Logs. On the right side, check the CSV output format and click **Save**.\r\n\r\n![An image showing ](Media/Image2.1.jpg)\r\n\r\nFigure 2. 1 : CSV Selected as Log Output Format\r\n\r\n### Access Log Report Settings\r\n\r\nThe access log report settings are located on the Main Control Panel > Settings Tab > Reporting section -> Access Log Report sub-section. The default configuration file for the\r\naccess log report properties is: <RLI_HOME>/config/log2db/ReportConfig.properties. This properties file contains the information about what to include in the Access Report and the\r\nsettings are described below.\r\n\r\nType of Chart\r\n\r\nThese settings indicate the type of chart and logo to be used in the report. There are three types\r\nof charts possible for the Access Report.\r\n\r\n- Pie - A circular chart divided into triangular areas proportional to the percentages of\r\nthe whole.\r\n- Bar - A chart with rectangular bars with lengths proportional to the values that they\r\nrepresent.\r\n- Line - Chart that displays information as a series of data points connected by straight segments.\r\n\r\nLogo for Report\r\n\r\nBrowse to the picture that should be included at the top left corner of the report (if any).\r\n\r\nTypes of Operations\r\n\r\nThe operations that appear in the access report are: bind, base search, one level search, sub\r\ntree search, add, modify, compare, and delete.\r\n\r\nFor each operation, you can set response time intervals, thresholds and error codes to report\r\non. Each of these parameters is described below. To set these parameters, select the type of\r\noperation, and click the Edit button.\r\n\r\nResponse Time Intervals\r\nPer operation type, you can specify the time intervals to be used as a basis for reporting\r\nhow long operations are taking to finish.\r\n\r\nThese values are in milliseconds (ms) and each interval is separated with a comma. There are five default intervals defined:\r\n[0, 10], [11, 100], [101, 1000], [1001, 10000] and [10000, infinity].\r\n\r\nFor each interval, the report indicates how many operations (with the associated percentage) lasted between 0ms and 10ms, how many operations lasted between 11ms\r\nand 100ms, how many operations lasted between 101ms and 1000ms, etc.\r\n\r\nThis is a good way to get an overall idea about the performance of the RadiantOne service\r\nfor handling specific types of operations.\r\n\r\nResponse Time Thresholds\r\nPer operation type, you can specify that any operation that exceeds a specified response\r\ntime, is included in the report. Include the maximum amount of time (in milliseconds) that a\r\nresponse should not exceed.\r\n\r\n>[!note] If the check box is not checked for the Response Time Exceeding\r\nparameter, then nothing is reported for this kind of operation.\r\n\r\nError Codes to Report\r\nPer operation type you can indicate certain error codes to include in the report. Enter the\r\nspecific error codes you are concerned about.\r\n\r\n>[!note] If the check box is not checked for the Error Codes to Report parameter,\r\nthen nothing is reported for this kind of operation.\r\n\r\n### Audit Report Settings\r\n\r\nThe audit report settings are located on the Main Control Panel -> Settings Tab > Reporting section > Audit Report sub-section. The default configuration file for the audit report properties\r\nis: <RLI_HOME>/config/log2db/AuditConfig.properties. This properties file contains the information about what to include in the Audit Report and the settings are described below.\r\n\r\nLogo for Report\r\n\r\nBrowse to the picture that should be included at the top left corner of the report (if any).\r\n\r\nTypes of Operations\r\n\r\nThe types of operations to be included in the audit report should be checked. The options are as\r\nfollows:\r\n\r\n- Bind – LDAP bind (authentication) requests received by RadiantOne.\r\n- Add – Add entry requests received by RadiantOne.\r\n- Modify – Update entry requests received by RadiantOne.\r\n- Search – Search (base, one-level, sub-tree) requests received by RadiantOne.\r\n- Delete – Delete requests received by RadiantOne.\r\n- Compare – Compare requests received by RadiantOne.\r\n\r\n### Group Audit Report Settings\r\n\r\nThe group audit report settings are located on the Main Control Panel > Settings Tab > Reporting section -> Group Audit Report sub-section. The default configuration file for the audit\r\nreport properties is: <RLI_HOME>/config/log2db/GroupAuditConfig.properties. This properties file contains the information about what to include in the Group Audit Report and the settings\r\nare described below.\r\n\r\nLogo for Report\r\n\r\nEnter the path to the picture that should be included at the top left corner of the report (if any).\r\n\r\nTypes of Operations\r\n\r\nThe types of operations to be included in the group audit report should be checked. The options are as follows:\r\n\r\n- Bind – LDAP bind (authentication) requests received by RadiantOne.\r\n- Add – Add entry requests received by RadiantOne.\r\n- Modify – Update entry requests received by RadiantOne.\r\n- Search – Search (base, one-level, sub-tree) requests received by RadiantOne.\r\n- Delete – Delete requests received by RadiantOne.\r\n- Compare – Compare requests received by RadiantOne.\r\n\r\n## Generating Reports\r\n\r\nDetails about how to generate reports and the contents of each are described in this section.\r\n\r\n### Access Log Report\r\n\r\nTo generate the access log report:\r\n\r\n1. Go to the Main Control Panel > Settings Tab > Reporting section > Access Log Report sub-section.\r\n2. If needed, customize the parameters and click Save.\r\n3. Click the Generate Report button. The Generate Access Log Report window opens.\r\n4. You can specify a location for the reports to be stored in the Output Location field. The default location for generated reports is <RLI_HOME>/reporting-birt/reports. Alternatively, you can specify a network share path.\r\n5. Indicate a time period the report should include (start and end dates and times).\r\n6. To generate a report that aggregates statistics from all nodes in your RadiantOne clusterinto a single report, check the Global Report box.\r\n7. To generate a report for a single node, indicate the server name in the Server Name field.\r\n>[!warning] if RadiantOne is deployed in a cluster, the default behavior of the\r\nAccess Report generator is to create a report for each node. Values entered in the Server Name field override checking the Global Report Box.\r\n8. You can specify a session ID if needed.\r\n\r\n![An image showing ](Media/Image2.2.jpg)\r\n\r\nFigure 2. 2 : Generating an Access Log Report for a Single Node\r\n\r\n9. Click the Generate button.\r\n\r\nThe access report consists of two main sections; a summary section followed by a detailed\r\nsection. The contents of each section are described below.\r\n\r\n**Summary Section**\r\n\r\nThe summary appears first and starts off with two tables. The first table indicates the types of operations received by RadiantOne and the total number per operation. The second table indicates the various result codes that appear throughout the report, their meaning and the\r\nnumber of times they appear. These tables are followed by sections dedicated for each type of operation (bind, base searches, one level searches, sub tree searches, add, modify, delete, and compare). These sections include a chart (line, bar or pie...depending on the configuration), in addition to two tables summarizing the results. One table details the duration intervals, the number of corresponding operations that occurred during the interval and the percentage of\r\nthese operations overall. The second table displays the result codes encountered for the\r\nspecific type of operation, their meaning and the number of times they appeared during the report.\r\n\r\nBelow is an example of the Bind Operations section from an Access Report.\r\n\r\n![An image showing ](Media/Image2.3.jpg)\r\n\r\nFigure 2. 3 : Example of Bind Operations Summary in an Access Report using Pie Chart\r\n\r\nIf there are no operations of a certain type during a reporting period, the section allocated for the\r\noperation has the word None in it.\r\n\r\n**Detailed Section**\r\n\r\nThe detailed section of the report is based on what has been configured for the response time thresholds and error codes of interest. These parameters are configurable for each type of operation (bind, add, delete...etc.).\r\n\r\n**Response Time Threshold**\r\n\r\nIf there is a response time threshold set for a specific operation, all events that exceed the\r\nthreshold appear in the detailed section of the report. The details for bind operations include\r\nhow long the operation took (in milliseconds), the date, session ID, connection #, operation #\r\nand the Bind DN (user the operation was issued by). Below is an example of report details on\r\nbind operations that exceed the configured threshold.\r\n\r\n![An image showing ](Media/Image2.4.jpg)\r\n\r\nFigure 2.4 : Example of Report Details for Bind Operations Exceeding a Threshold\r\n\r\nThe details for base search operations include how long the operation took (in milliseconds), date, session ID, connection ID, operation ID, the Base DN (entry that was searched for) and the filter.\r\n\r\nThe details for one level search operations include how long the operation took (in milliseconds), date, session ID, connection ID, operation ID, the Base DN (entry where the one\r\nlevel search started from) and the filter.\r\n\r\nThe details for sub tree search operations include how long the operation took (in milliseconds),\r\ndate, session ID, connection ID, operation ID, the Base DN (entry where the sub tree search\r\nstarted from) and the filter.\r\n\r\nThe details for add operations include how long the operation took (in milliseconds), date,\r\nsession ID, connection ID, operation ID, the Entry (DN) to be added.\r\n\r\nThe details for modify operations include how long the operation took (in milliseconds), date,\r\nsession ID, connection ID, operation ID, the object (entry to be modified) and the modification\r\ndetails.\r\n\r\nThe details for delete operations include how long the operation took (in milliseconds), date,\r\nsession ID, connection ID, operation ID, the Entry (DN) to be deleted.\r\n\r\nThe details for compare operations include how long the operation took (in milliseconds), date,\r\nsession ID, connection ID, operation ID, and information about the compare operation.\r\n\r\n**Error Codes of Interest**\r\n\r\nIf specific error codes (or all error codes) associated with an operation type (bind, add, delete...etc.) have been configured for the report, they appear in the detailed section following the items that have exceeded the response time threshold. The details for bind operations\r\ninclude the result code, date, session ID, connection ID, operation ID, and the Bind DN (user the operation was issued by). Below is an example of a report details for bind operations that return an error code of interest.\r\n\r\n![An image showing ](Media/Image2.5.jpg)\r\n\r\nFigure 2. 5 : Example of Bind Operations Details in an Access Report\r\n\r\n\r\n>[!note] If both the Response Time Exceeding and the Error Codes to Report options are unchecked for ALL operations (Bind, Base search, One Levelsearch, Sub Tree search, Add, Modify, Delete and Compare), the detailed part of the report is not generated. If both Response Time Exceeding and the ErrorCodes to Report options are unchecked just for a specific kind of operation, the corresponding part of the report designated for the operation is empty. However, if one of these options is enabled for a specific operation and no operations of the type are found, the part is empty, but it is still included in the detailed report.**\r\n\r\n### Audit Report\r\n\r\nTo generate the audit report:\r\n\r\n1. Go to the Main Control Panel > Settings Tab > Reporting section > Audit Report sub-section.\r\n2. If needed, customize the parameters and click Save.\r\n3. Click on the Generate Report button. The Generate Audit Report window opens.\r\n4. You can specify a location for the reports to be stored in the Output Location field. The default location for generated reports is <RLI_HOME>\\reporting-birt\\reports. Alternatively, you can specify a network share path.\r\n5. Indicate a time period the report should include (start and end dates and times)\r\n6. To generate a report that aggregate statistics from all nodes in your RadiantOne cluster\r\n    into a single report, check the Global Report box.\r\n7. To generate a report for a single node, indicate the server name in the Server Name field.\r\n\r\n>[!warning] if RadiantOne is deployed in a cluster, the default behavior of the\r\nAudit Report generator is to create a report for each node. The values entered in the Server Name field override checking the Global Report box.\r\n\r\n8. You can specify a session ID if needed.\r\n\r\n![An image showing ](Media/Image2.6.jpg)\r\n\r\nFigure 2. 6 : Generating an Audit Report for a Single Node\r\n\r\n9. Click the Generate button.\r\n\r\nThe audit report is comprised of a summary of all types of operations performed by a specific\r\nuser during a specific session.\r\n\r\nThe session information is listed at the top of a section followed by the user DN that performed\r\nthe operations. Next to the user DN is a table consisting of all types of operations performed by\r\nthe user in addition to the total number of times that type of operation was performed.\r\n\r\n![An image showing ](Media/Image2.7.jpg)\r\n\r\nFigure 2. 7 : Example Contents of an Audit Report\r\n\r\n### Group Audit Report\r\n\r\nThe Group Audit Report is similar in output to the Audit Report. The only difference being the\r\nreport categorizes user activity based on groups.\r\n\r\nTo generate the Group Audit report:\r\n\r\n1. Go to the Main Control Panel > Settings Tab > Reporting section > Group Audit Report sub-section.\r\n2. On the right side, click on the Generate Report button.\r\n3. Specify a location for the reports to be stored.\r\n4. Enter the groups location (use a semi-colon to separate the list of group location DNs).\r\n5. Enter the attribute(s) containing the group members.\r\n6. Indicate whether or not to show members without any activity in the report. If you want a report of a list of groups and the members of each group, you might not care if they have performed any requests to RadiantOne. For example, in the Group Audit Report shown below, all members of a group named Dynamic are shown in the report. Each member has N/A for their stats as they have not performed any activity during the reporting period defined.\r\n\r\n![An image showing ](Media/Image2.8.jpg)\r\n\r\nFigure 2.8: Example Group Audit Report Containing Members with No Activity\r\n\r\n7. Enter a time period the report should include (start and end dates).\r\n8. Additional parameters like server name and session ID can also be included in the report if needed.\r\n9. Click Generate.\r\n\r\nThe group audit report is comprised of a summary of all types of operations performed, grouped\r\nby user, during a specific session.\r\n\r\nThe session information is listed at the top of a section followed by the user DN that performed\r\nthe operations. Next to the user DN is a table consisting of all types of operations performed by\r\nthe user in addition to the total number of times that type of operation was performed.\r\n\r\n![An image showing ](Media/Image2.9.jpg)\r\n\r\nFigure 2. 9 : Example Contents of a Group Audit Report\r\n-->","htmlAst":{"type":"root","children":[{"type":"comment","value":"\n# Chapter 2: Auditing and Reporting\n\nReports are a key tool for monitoring the health of the RadiantOne service and should be\ngenerated frequently to understand the performance and load on the server and audit the\nactivity (who is doing what and when). RadiantOne includes three default types of basic reports:\nAccess, Audit and Group Audit. This section describes the report settings, content of these\nreports, and recommendations on report usage.\n\n## Recommendations for Auditing and Reporting\n\nThere are four recommendations for auditing and reporting:\n\n- To analyze/debug a problem\n- To periodically monitor the health of the RadiantOne service\n- To audit client activity of RadiantOne (who is connecting, doing what, and when)\n- To audit configuration changes to RadiantOne\n\nThe following sections describe each recommendation in more details.\n\n>[!warning] The scenarios provided below are general guidelines and entirely optional. You should generate reports as often as required for your deployment.\n\n### Analyzing Problems\n\nIf consumers of the RadiantOne service are experiencing problems (time-consuming logins, expected information not being returned...etc.), the access report can be helpful in pinpointing what is happening on the server and diagnosing the problem.\n\nThe instructions in this section assume the following:\n\n- The RadiantOne server log level has been set to a minimum of Info.\n- The access log content is relevant (captures the period of time where consumers are seeing issues).\n- All operations are configured to be included in the report.\n- RadiantOne is configured to log to CSV (on the Settings Tab > Logs section > Server Logs, make sure the CSV Output format option is checked on the right side).\n\n#### Starting the Log to Database Utility\n\nThe Log2DB settings can be managed from the Main Control Panel > Settings Tab > Reporting Section > Log2DB Settings sub-section.\n\nAfter confirming the proper configuration, start the Log2DB Utility. On Windows platforms,\nexecute <RLI_HOME>/bin/runAccessLog2DB.bat <path to AccessLog2DBconfig.properties\nfile>. On UNIX platforms, execute runAccessLog2DB.sh <path to\nAccessLog2DBconfig.properties file>. The AccessLog2DBconfig.properties file is in\n<RLI_HOME>/config/log2db.\n\nThe Log2DB utility writes the access log information into a database. After, generate the Access Report from the Main Control Panel -> Settings Tab -> Reporting section -> Access Log Report sub-section. On the right side, click on the Generate Report button. The report can be found in the location indicated in the Output Location parameter which is <RLI_HOME>/reporting-birt/reports by default. If RadiantOne is deployed in a cluster, you can generate a single report that aggregates statistics from all nodes in the cluster. For more information on configuring and generating an Access Log report, see [Access Log Report Settings](#access-log-report-settings) and [Access Log Report](#access-log-report).\n\nThe summary section provides you with valuable information regarding how long operations are\ntaking and a summary of error codes found. In the detailed section of the report, you will find\nspecific entries from the log that match either a certain error code and/or exceed a response\ntime threshold. This information can be the starting point for further investigation and pinpoints\nthe location in the access log (by searching for the exact connection and operation numbers\nassociated with a specific operation) where the issue occurred. Sometimes, examining the\nactivity prior to an error can help in determining the cause of a problem.\n\n### Monitoring the Health of the RadiantOne Service\n\nIt is typically recommended to monitor the health of the RadiantOne service over a one week period at least once a month. Pay close attention to the configured access log rotation schedule\nto ensure no log content is missed (if applicable for your reports). The access log can be configured to roll over based on a configured size.\n\nAt the end of the reporting period, you can generate the Access Report from the Main Control Panel > Settings Tab > Reporting section > Access Log Report sub-section. On the right side,\nclick the Generate Report button. The report can be found in the location indicated in the Output Location parameter which is <RLI_HOME>/reporting-birt/reports by default.\n\nThe summary section provides you with valuable information regarding how long operations are\ntaking and a summary of error codes found. If these numbers are not as expected, they may\nindicate areas where tuning is required. In the detailed section of the report, you will find specific\nentries from the log that match either a certain error code and/or exceed a response time\nthreshold. With this information, you can search the exact log file location for more information\nabout the request that exceeded the response time. For example, if search operations are\nconsistently slow to respond against a certain branch in the RadiantOne namespace this could\nindicate that a cache should be configured for this branch.\n\n### Auditing RadiantOne Configuration Changes\n\nTo log configuration changes made through command line, using the vdsconfig utility, enable\nconfig logging with the following steps:\n\n\n>[!warning] these steps require downtime since all services must be stopped. If RadiantOne is deployed in a cluster, perform the following steps on each node.\n\n1. Stop all RadiantOne services including ZooKeeper.\n2. Edit <RLI_HOME>\\config\\advanced\\features.properties and set:\n    vdsconfig.logging.enabled=true\n3. Restart ZooKeeper.\n4. Restart all needed RadiantOne services.\n\nConfiguration changes are logged in: <RLI_HOME>/logs/vdsconfig.log\n\n### Auditing RadiantOne Client Activity\n\nIt is typically recommended to audit RadiantOne client activity over a one-week period at least once a month.\n\nPay close attention to the configured access log rotation schedule to ensure no log content is missed (if applicable for your reports). The access log may be configured to roll over based on a\nconfigured size.\n\nYou can generate the Audit Report from the Main Control Panel > Settings Tab > Reporting section > Audit Report sub-section. On the right side, click the Generate Report button. The\nreport can be found in the location indicated in the Output Location parameter which is <RLI_HOME>/reporting-birt/reports by default. If RadiantOne is deployed in a cluster, you can\ngenerate a single report that aggregates statistics from all nodes in the cluster. For more information on configuring and generating an audit report, see [Audit Report Settings](#audit-report-settings) and [Audit Report](#audit-report).\n\n>[!warning] you can also audit user activity and have the report sorted by\ngroups. The [Group Audit Report](#group-audit-report) is similar in output to the Audit Report. The only difference being the report categorizes user activity based on groups.\n\nThe session information is listed at the top of a section followed by the user DN that performed\nthe operations. Next to the user DN is a table consisting of all types of operations performed by\nthe user in addition to the total number of times that type of operation was performed. This\ninformation allows you to monitor who is accessing the RadiantOne service and when, in\naddition to what operations they are performing. This can help pinpoint undesirable access.\n\n### Maintaining the Log Database\n\nIt is important to note that there is no built-in maintenance of the log database. The database\nadministrator responsible for the database chosen to store the log content should maintain the\ndatabase table as needed (the amount of log content stored in the database depends on\nfrequency the Log2DB utility is run and the activity against RadiantOne). This includes things\nlike sizing the table properly for log history it should store, clearing the old log content from the\ntable when it is no longer needed...etc.\n\n>[!note] For assistance with establishing log maintenance and a reporting program, please contact Radiant Logic for professional services.\n\n## Configuration\n\nThe reports are built on top of the capability of RadiantOne to store the access log content into a\ndatabase table. RadiantOne uses a separate utility named Log2DB to log into a database. There are four configuration settings that need to be considered. The [Log2DB settings](#log2db-settings), the [Access Report settings](#access-log-report-settings), the [Audit Report settings](#audit-report-settings), and the [Group Audit Report settings](#group-audit-report-settings). These are described in this section.\n\n>[!warning] the database associated with the Log2DB settings must be running in order start the Log2DB Utility.\n\n### Log2DB Settings\n\nThe database that houses the table which contains the RadiantOne access log content may be in any database server you choose. The default settings leverage a Derby database that is\nincluded with RadiantOne. These settings are described below and are located on the Main Control Panel > Settings Tab > Reporting section > [Log2DB Settings](#log2db-settings) sub-section.\n\n>[!warning] if you plan on using the RadiantOne [default report generation](#generating-reports),\nthen the log2db database must be Microsoft SQL Server, Oracle, Derby or PostgreSQL.\n\nThe default configuration file for logging to a database is:\n<RLI_HOME>/config/log2db/AccessLog2DBconfig.properties\n\nThis properties file contains the connection information to the database where you want to store\nthe log table and the settings are described below.\n\nDatabase Settings\nThe following settings are related to the database that stores the table containing the access log\ncontents.\n\n- **Database Datasource**\n<br>The name of the data source associated with the database server that will store the log content.\n- Table Name\n<br>The table name that will store the log contents.\n- Mode (either Truncate or Append)\n<br>When you start the log process, if you are in truncate mode, it empties the contents of the log table before anything new gets added. If you are using append mode, then the new log content is appended at the end of the table (rows are added).\n- Table Creation\n<br>Enter the appropriate create table syntax for the type of database you want to use. If you want to create the table on your own, then you can leave this parameter blank.\n\n>[!warning] By default, the FILTER field in the table only allows 255 characters. If you are expecting client queries containing filters longer than 255 characters, edit the length accordingly in the create table statement and recreate the log table. Otherwise, any request from clients containing a filter longer than 255 characters is not logged into the database table by RadiantOne.\n\n- Testing the Connection\n<br>Click the Test Connection button to verify the connection to the database is working.\n- Creating the Table\nIf the table that will store the access log content does not exist, use the Create Table Button to create it. Verify that the create table statement listed in the Table Creation parameter is accurate. You can also execute\n<RLI_HOME>\\bin\\advanced\\runCreateAccessLogTable.bat\n(runCreateAccessLogTable.sh on UNIX) to create the log table in the database.\n- Index Creation\n<br>To create the indexes for the log table, click the Create Index button.\n- Emptying the Table\n<br>To delete the contents of the log table, click the Empty Table button.\n- Dropping the Table\n<br>To delete the log table itself, click the Drop Table button\n\nRules\n\nThe rules associated with logging to the database can be seen in the <RLI_HOME>/config/log2db/AccessLog2DBconfig.properties file and are based on regular expression.\n\n- Mapping – indicates the format of the log that is parsed and reported on.\n- Pattern – indicates the regular expression that is associated with the mapping.\n\nLog Output Format\n\nOn the Main Control Panel > Settings tab > Logs section, select Access Logs. On the right side, check the CSV output format and click **Save**.\n\n![An image showing ](Media/Image2.1.jpg)\n\nFigure 2. 1 : CSV Selected as Log Output Format\n\n### Access Log Report Settings\n\nThe access log report settings are located on the Main Control Panel > Settings Tab > Reporting section -> Access Log Report sub-section. The default configuration file for the\naccess log report properties is: <RLI_HOME>/config/log2db/ReportConfig.properties. This properties file contains the information about what to include in the Access Report and the\nsettings are described below.\n\nType of Chart\n\nThese settings indicate the type of chart and logo to be used in the report. There are three types\nof charts possible for the Access Report.\n\n- Pie - A circular chart divided into triangular areas proportional to the percentages of\nthe whole.\n- Bar - A chart with rectangular bars with lengths proportional to the values that they\nrepresent.\n- Line - Chart that displays information as a series of data points connected by straight segments.\n\nLogo for Report\n\nBrowse to the picture that should be included at the top left corner of the report (if any).\n\nTypes of Operations\n\nThe operations that appear in the access report are: bind, base search, one level search, sub\ntree search, add, modify, compare, and delete.\n\nFor each operation, you can set response time intervals, thresholds and error codes to report\non. Each of these parameters is described below. To set these parameters, select the type of\noperation, and click the Edit button.\n\nResponse Time Intervals\nPer operation type, you can specify the time intervals to be used as a basis for reporting\nhow long operations are taking to finish.\n\nThese values are in milliseconds (ms) and each interval is separated with a comma. There are five default intervals defined:\n[0, 10], [11, 100], [101, 1000], [1001, 10000] and [10000, infinity].\n\nFor each interval, the report indicates how many operations (with the associated percentage) lasted between 0ms and 10ms, how many operations lasted between 11ms\nand 100ms, how many operations lasted between 101ms and 1000ms, etc.\n\nThis is a good way to get an overall idea about the performance of the RadiantOne service\nfor handling specific types of operations.\n\nResponse Time Thresholds\nPer operation type, you can specify that any operation that exceeds a specified response\ntime, is included in the report. Include the maximum amount of time (in milliseconds) that a\nresponse should not exceed.\n\n>[!note] If the check box is not checked for the Response Time Exceeding\nparameter, then nothing is reported for this kind of operation.\n\nError Codes to Report\nPer operation type you can indicate certain error codes to include in the report. Enter the\nspecific error codes you are concerned about.\n\n>[!note] If the check box is not checked for the Error Codes to Report parameter,\nthen nothing is reported for this kind of operation.\n\n### Audit Report Settings\n\nThe audit report settings are located on the Main Control Panel -> Settings Tab > Reporting section > Audit Report sub-section. The default configuration file for the audit report properties\nis: <RLI_HOME>/config/log2db/AuditConfig.properties. This properties file contains the information about what to include in the Audit Report and the settings are described below.\n\nLogo for Report\n\nBrowse to the picture that should be included at the top left corner of the report (if any).\n\nTypes of Operations\n\nThe types of operations to be included in the audit report should be checked. The options are as\nfollows:\n\n- Bind – LDAP bind (authentication) requests received by RadiantOne.\n- Add – Add entry requests received by RadiantOne.\n- Modify – Update entry requests received by RadiantOne.\n- Search – Search (base, one-level, sub-tree) requests received by RadiantOne.\n- Delete – Delete requests received by RadiantOne.\n- Compare – Compare requests received by RadiantOne.\n\n### Group Audit Report Settings\n\nThe group audit report settings are located on the Main Control Panel > Settings Tab > Reporting section -> Group Audit Report sub-section. The default configuration file for the audit\nreport properties is: <RLI_HOME>/config/log2db/GroupAuditConfig.properties. This properties file contains the information about what to include in the Group Audit Report and the settings\nare described below.\n\nLogo for Report\n\nEnter the path to the picture that should be included at the top left corner of the report (if any).\n\nTypes of Operations\n\nThe types of operations to be included in the group audit report should be checked. The options are as follows:\n\n- Bind – LDAP bind (authentication) requests received by RadiantOne.\n- Add – Add entry requests received by RadiantOne.\n- Modify – Update entry requests received by RadiantOne.\n- Search – Search (base, one-level, sub-tree) requests received by RadiantOne.\n- Delete – Delete requests received by RadiantOne.\n- Compare – Compare requests received by RadiantOne.\n\n## Generating Reports\n\nDetails about how to generate reports and the contents of each are described in this section.\n\n### Access Log Report\n\nTo generate the access log report:\n\n1. Go to the Main Control Panel > Settings Tab > Reporting section > Access Log Report sub-section.\n2. If needed, customize the parameters and click Save.\n3. Click the Generate Report button. The Generate Access Log Report window opens.\n4. You can specify a location for the reports to be stored in the Output Location field. The default location for generated reports is <RLI_HOME>/reporting-birt/reports. Alternatively, you can specify a network share path.\n5. Indicate a time period the report should include (start and end dates and times).\n6. To generate a report that aggregates statistics from all nodes in your RadiantOne clusterinto a single report, check the Global Report box.\n7. To generate a report for a single node, indicate the server name in the Server Name field.\n>[!warning] if RadiantOne is deployed in a cluster, the default behavior of the\nAccess Report generator is to create a report for each node. Values entered in the Server Name field override checking the Global Report Box.\n8. You can specify a session ID if needed.\n\n![An image showing ](Media/Image2.2.jpg)\n\nFigure 2. 2 : Generating an Access Log Report for a Single Node\n\n9. Click the Generate button.\n\nThe access report consists of two main sections; a summary section followed by a detailed\nsection. The contents of each section are described below.\n\n**Summary Section**\n\nThe summary appears first and starts off with two tables. The first table indicates the types of operations received by RadiantOne and the total number per operation. The second table indicates the various result codes that appear throughout the report, their meaning and the\nnumber of times they appear. These tables are followed by sections dedicated for each type of operation (bind, base searches, one level searches, sub tree searches, add, modify, delete, and compare). These sections include a chart (line, bar or pie...depending on the configuration), in addition to two tables summarizing the results. One table details the duration intervals, the number of corresponding operations that occurred during the interval and the percentage of\nthese operations overall. The second table displays the result codes encountered for the\nspecific type of operation, their meaning and the number of times they appeared during the report.\n\nBelow is an example of the Bind Operations section from an Access Report.\n\n![An image showing ](Media/Image2.3.jpg)\n\nFigure 2. 3 : Example of Bind Operations Summary in an Access Report using Pie Chart\n\nIf there are no operations of a certain type during a reporting period, the section allocated for the\noperation has the word None in it.\n\n**Detailed Section**\n\nThe detailed section of the report is based on what has been configured for the response time thresholds and error codes of interest. These parameters are configurable for each type of operation (bind, add, delete...etc.).\n\n**Response Time Threshold**\n\nIf there is a response time threshold set for a specific operation, all events that exceed the\nthreshold appear in the detailed section of the report. The details for bind operations include\nhow long the operation took (in milliseconds), the date, session ID, connection #, operation #\nand the Bind DN (user the operation was issued by). Below is an example of report details on\nbind operations that exceed the configured threshold.\n\n![An image showing ](Media/Image2.4.jpg)\n\nFigure 2.4 : Example of Report Details for Bind Operations Exceeding a Threshold\n\nThe details for base search operations include how long the operation took (in milliseconds), date, session ID, connection ID, operation ID, the Base DN (entry that was searched for) and the filter.\n\nThe details for one level search operations include how long the operation took (in milliseconds), date, session ID, connection ID, operation ID, the Base DN (entry where the one\nlevel search started from) and the filter.\n\nThe details for sub tree search operations include how long the operation took (in milliseconds),\ndate, session ID, connection ID, operation ID, the Base DN (entry where the sub tree search\nstarted from) and the filter.\n\nThe details for add operations include how long the operation took (in milliseconds), date,\nsession ID, connection ID, operation ID, the Entry (DN) to be added.\n\nThe details for modify operations include how long the operation took (in milliseconds), date,\nsession ID, connection ID, operation ID, the object (entry to be modified) and the modification\ndetails.\n\nThe details for delete operations include how long the operation took (in milliseconds), date,\nsession ID, connection ID, operation ID, the Entry (DN) to be deleted.\n\nThe details for compare operations include how long the operation took (in milliseconds), date,\nsession ID, connection ID, operation ID, and information about the compare operation.\n\n**Error Codes of Interest**\n\nIf specific error codes (or all error codes) associated with an operation type (bind, add, delete...etc.) have been configured for the report, they appear in the detailed section following the items that have exceeded the response time threshold. The details for bind operations\ninclude the result code, date, session ID, connection ID, operation ID, and the Bind DN (user the operation was issued by). Below is an example of a report details for bind operations that return an error code of interest.\n\n![An image showing ](Media/Image2.5.jpg)\n\nFigure 2. 5 : Example of Bind Operations Details in an Access Report\n\n\n>[!note] If both the Response Time Exceeding and the Error Codes to Report options are unchecked for ALL operations (Bind, Base search, One Levelsearch, Sub Tree search, Add, Modify, Delete and Compare), the detailed part of the report is not generated. If both Response Time Exceeding and the ErrorCodes to Report options are unchecked just for a specific kind of operation, the corresponding part of the report designated for the operation is empty. However, if one of these options is enabled for a specific operation and no operations of the type are found, the part is empty, but it is still included in the detailed report.**\n\n### Audit Report\n\nTo generate the audit report:\n\n1. Go to the Main Control Panel > Settings Tab > Reporting section > Audit Report sub-section.\n2. If needed, customize the parameters and click Save.\n3. Click on the Generate Report button. The Generate Audit Report window opens.\n4. You can specify a location for the reports to be stored in the Output Location field. The default location for generated reports is <RLI_HOME>\\reporting-birt\\reports. Alternatively, you can specify a network share path.\n5. Indicate a time period the report should include (start and end dates and times)\n6. To generate a report that aggregate statistics from all nodes in your RadiantOne cluster\n    into a single report, check the Global Report box.\n7. To generate a report for a single node, indicate the server name in the Server Name field.\n\n>[!warning] if RadiantOne is deployed in a cluster, the default behavior of the\nAudit Report generator is to create a report for each node. The values entered in the Server Name field override checking the Global Report box.\n\n8. You can specify a session ID if needed.\n\n![An image showing ](Media/Image2.6.jpg)\n\nFigure 2. 6 : Generating an Audit Report for a Single Node\n\n9. Click the Generate button.\n\nThe audit report is comprised of a summary of all types of operations performed by a specific\nuser during a specific session.\n\nThe session information is listed at the top of a section followed by the user DN that performed\nthe operations. Next to the user DN is a table consisting of all types of operations performed by\nthe user in addition to the total number of times that type of operation was performed.\n\n![An image showing ](Media/Image2.7.jpg)\n\nFigure 2. 7 : Example Contents of an Audit Report\n\n### Group Audit Report\n\nThe Group Audit Report is similar in output to the Audit Report. The only difference being the\nreport categorizes user activity based on groups.\n\nTo generate the Group Audit report:\n\n1. Go to the Main Control Panel > Settings Tab > Reporting section > Group Audit Report sub-section.\n2. On the right side, click on the Generate Report button.\n3. Specify a location for the reports to be stored.\n4. Enter the groups location (use a semi-colon to separate the list of group location DNs).\n5. Enter the attribute(s) containing the group members.\n6. Indicate whether or not to show members without any activity in the report. If you want a report of a list of groups and the members of each group, you might not care if they have performed any requests to RadiantOne. For example, in the Group Audit Report shown below, all members of a group named Dynamic are shown in the report. Each member has N/A for their stats as they have not performed any activity during the reporting period defined.\n\n![An image showing ](Media/Image2.8.jpg)\n\nFigure 2.8: Example Group Audit Report Containing Members with No Activity\n\n7. Enter a time period the report should include (start and end dates).\n8. Additional parameters like server name and session ID can also be included in the report if needed.\n9. Click Generate.\n\nThe group audit report is comprised of a summary of all types of operations performed, grouped\nby user, during a specific session.\n\nThe session information is listed at the top of a section followed by the user DN that performed\nthe operations. Next to the user DN is a table consisting of all types of operations performed by\nthe user in addition to the total number of times that type of operation was performed.\n\n![An image showing ](Media/Image2.9.jpg)\n\nFigure 2. 9 : Example Contents of a Group Audit Report\n"}],"data":{"quirksMode":false}},"fileAbsolutePath":"C:/Ensemble/Projects/RadiantLogic/radiantlogic-v8-developer-site-ssh-2/developer-site/.cache/gatsby-source-git/r1-saas/documentation/monitoring-and-reporting-guide/02-auditing-and-reporting.md","frontmatter":{"title":"Monitoring and Reporting Guide"},"headings":[]},"toc":{"html":"<ul>\n<li><a href=\"01-monitoring.md\">Monitoring</a></li>\n<li><a href=\"02-auditing-and-reporting.md\">Auditing and Reporting</a></li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"01-monitoring.md"},"children":[{"type":"text","value":"Monitoring"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"02-auditing-and-reporting.md"},"children":[{"type":"text","value":"Auditing and Reporting"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"fileAbsolutePath":"C:/Ensemble/Projects/RadiantLogic/radiantlogic-v8-developer-site-ssh-2/developer-site/.cache/gatsby-source-git/r1-saas/documentation/monitoring-and-reporting-guide/TOC.md","frontmatter":{"title":"Monitoring and Reporting Guide"}},"rootToc":{"fileAbsolutePath":"C:/Ensemble/Projects/RadiantLogic/radiantlogic-v8-developer-site-ssh-2/developer-site/.cache/gatsby-source-git/r1-saas/home-pages/TOC.md","frontmatter":{"title":"Homepages TOC"},"htmlAst":{"type":"root","children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"homepage1.md"},"children":[{"type":"text","value":"Homepage 1"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"homepage2.md"},"children":[{"type":"text","value":"Homepage 2"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}}}},"pageContext":{"slug":"monitoring-and-reporting-guide/02-auditing-and-reporting","dir":"documentation/monitoring-and-reporting-guide/02-auditing-and-reporting.md","absolutePath":"C:/Ensemble/Projects/RadiantLogic/radiantlogic-v8-developer-site-ssh-2/developer-site/.cache/gatsby-source-git/r1-saas/documentation/monitoring-and-reporting-guide/02-auditing-and-reporting.md","tocRegex":"/(r1-saas)/(documentation/)(monitoring-and-reporting-guide/)?(02-auditing-and-reporting.md/)?(TOC.md)/ig","rootTocRegex":".*/(gatsby-source-git)\\/(r1-saas)\\/(home-pages)\\/(TOC.md)/ig"}},"staticQueryHashes":["1597948176","3667468360","63159454"]}