{"componentChunkName":"component---src-templates-base-page-js","path":"/ia/version-1.2/run-ops/backup-restore/","result":{"data":{"pageContent":{"html":"<h1 id=\"backup-and-restore\">Backup and Restore</h1>\n<p>The persistent data is stored using docker volumes. In server mode these volumes use bind mounts to store all files in pre-defined paths in the filesystem. Data includes configuration, encrypted credentials, tls certificates, logs and IGRC project.</p>\n<p>The Identity Analytics tools CLI includes an option to backup and restore all the data contained in the volumes of a given instance.</p>\n<p>All data contained in the volumes will be backed up to a single <code class=\"language-text\">.tar</code> file. For safety, this file must be stored in a different location. Using this single file the full instance can be restored.</p>\n<blockquote>\n<p>[!warning] The backup <strong>only</strong> works on the data <strong>contained</strong> in the docker volumes. If an external database is used the database is <strong>NOT</strong> backed-up using the following CLI command.<br>\nWhen using an external database it is necessary to perform in addition a backup of the database.<br>\nThe CLI backup command will backup the database data when an internal database is configured.</p>\n</blockquote>\n<h2 id=\"pre-requisites\">Pre-requisites</h2>\n<p>All containers must be shutdown before running the backup and restore process. To do so run the following command:</p>\n\n          <codeblockcopytag>brainwave stop</codeblockcopytag>\n          \n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">brainwave stop</code></pre></div>\n<p>Wait until all services are properly stopped before trying to backup or restore.</p>\n<h2 id=\"backup-sequence\">Backup sequence</h2>\n<p>To backup the data within the docker volumes please run the following command:</p>\n\n          <codeblockcopytag>brainwave backup create --output /path/to/output/dir</codeblockcopytag>\n          \n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">brainwave backup create <span class=\"token parameter variable\">--output</span> /path/to/output/dir</code></pre></div>\n<p>For more information on the use of the backup command line please type: <code class=\"language-text\">brainwave backup create --help</code></p>\n<p>The configured output directory is is the directory where the <code class=\"language-text\">.tar</code> will be created. The name of the file is generated automatically and it will include the full date and time information. For example: <code class=\"language-text\">bwbackup_202212271307.tar</code>.</p>\n<h2 id=\"restore-sequence\">Restore sequence</h2>\n<p>To restore the data run the following command:</p>\n\n          <codeblockcopytag>brainwave backup restore --input /path/to/tar/bwbackup_XXXXX.tar</codeblockcopytag>\n          \n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">brainwave backup restore <span class=\"token parameter variable\">--input</span> /path/to/tar/bwbackup_XXXXX.tar</code></pre></div>\n<blockquote>\n<p>[!warning] The data present in the tar file will completely <strong>override</strong> the current data in the instance!</p>\n</blockquote>\n<h2 id=\"post-operations\">Post operations</h2>\n<blockquote>\n<p>[!warning] The backup includes the certificates when the <code class=\"language-text\">https://</code> has been configured. When restoring a backup on another server it is necessary to update the desired certificates accordingly.</p>\n</blockquote>\n<p>To restart the service please run the following command:</p>\n\n          <codeblockcopytag>brainwave start</codeblockcopytag>\n          \n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">brainwave start</code></pre></div>\n<p>This will bring all the services back up and running.</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{"id":"backup-and-restore"},"children":[{"type":"text","value":"Backup and Restore"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The persistent data is stored using docker volumes. In server mode these volumes use bind mounts to store all files in pre-defined paths in the filesystem. Data includes configuration, encrypted credentials, tls certificates, logs and IGRC project."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The Identity Analytics tools CLI includes an option to backup and restore all the data contained in the volumes of a given instance."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"All data contained in the volumes will be backed up to a single "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":".tar"}]},{"type":"text","value":" file. For safety, this file must be stored in a different location. Using this single file the full instance can be restored."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"[!warning] The backup "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"only"}]},{"type":"text","value":" works on the data "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"contained"}]},{"type":"text","value":" in the docker volumes. If an external database is used the database is "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"NOT"}]},{"type":"text","value":" backed-up using the following CLI command."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\nWhen using an external database it is necessary to perform in addition a backup of the database."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\nThe CLI backup command will backup the database data when an internal database is configured."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"pre-requisites"},"children":[{"type":"text","value":"Pre-requisites"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"All containers must be shutdown before running the backup and restore process. To do so run the following command:"}]},{"type":"text","value":"\n\n          "},{"type":"element","tagName":"codeblockcopytag","properties":{},"children":[{"type":"text","value":"brainwave stop"}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sh"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sh"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sh"]},"children":[{"type":"text","value":"brainwave stop"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Wait until all services are properly stopped before trying to backup or restore."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"backup-sequence"},"children":[{"type":"text","value":"Backup sequence"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To backup the data within the docker volumes please run the following command:"}]},{"type":"text","value":"\n\n          "},{"type":"element","tagName":"codeblockcopytag","properties":{},"children":[{"type":"text","value":"brainwave backup create --output /path/to/output/dir"}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sh"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sh"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sh"]},"children":[{"type":"text","value":"brainwave backup create "},{"type":"element","tagName":"span","properties":{"className":["token","parameter","variable"]},"children":[{"type":"text","value":"--output"}]},{"type":"text","value":" /path/to/output/dir"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For more information on the use of the backup command line please type: "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"brainwave backup create --help"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The configured output directory is is the directory where the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":".tar"}]},{"type":"text","value":" will be created. The name of the file is generated automatically and it will include the full date and time information. For example: "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"bwbackup_202212271307.tar"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"restore-sequence"},"children":[{"type":"text","value":"Restore sequence"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To restore the data run the following command:"}]},{"type":"text","value":"\n\n          "},{"type":"element","tagName":"codeblockcopytag","properties":{},"children":[{"type":"text","value":"brainwave backup restore --input /path/to/tar/bwbackup_XXXXX.tar"}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sh"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sh"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sh"]},"children":[{"type":"text","value":"brainwave backup restore "},{"type":"element","tagName":"span","properties":{"className":["token","parameter","variable"]},"children":[{"type":"text","value":"--input"}]},{"type":"text","value":" /path/to/tar/bwbackup_XXXXX.tar"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"[!warning] The data present in the tar file will completely "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"override"}]},{"type":"text","value":" the current data in the instance!"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"post-operations"},"children":[{"type":"text","value":"Post operations"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"[!warning] The backup includes the certificates when the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"https://"}]},{"type":"text","value":" has been configured. When restoring a backup on another server it is necessary to update the desired certificates accordingly."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To restart the service please run the following command:"}]},{"type":"text","value":"\n\n          "},{"type":"element","tagName":"codeblockcopytag","properties":{},"children":[{"type":"text","value":"brainwave start"}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sh"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sh"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sh"]},"children":[{"type":"text","value":"brainwave start"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This will bring all the services back up and running."}]}],"data":{"quirksMode":false}},"fileAbsolutePath":"/home/runner/work/developer-site/developer-site/.cache/gatsby-source-git/ia/version-1.2/documentation/run-ops/backup-restore.md","frontmatter":{"title":"Backup and Restore"},"headings":[{"id":"backup-and-restore","value":"Backup and Restore","depth":1},{"id":"pre-requisites","value":"Pre-requisites","depth":2},{"id":"backup-sequence","value":"Backup sequence","depth":2},{"id":"restore-sequence","value":"Restore sequence","depth":2},{"id":"post-operations","value":"Post operations","depth":2}]},"toc":{"html":"<ul>\n<li><a href=\"preface.md\">Preface</a></li>\n<li><a href=\"backup-restore.md\">Backup and Restore</a></li>\n<li><a href=\"purge.md\">Data Purging</a></li>\n<li><a href=\"upgrading.md\">Upgrading</a></li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"preface.md"},"children":[{"type":"text","value":"Preface"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"backup-restore.md"},"children":[{"type":"text","value":"Backup and Restore"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"purge.md"},"children":[{"type":"text","value":"Data Purging"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"upgrading.md"},"children":[{"type":"text","value":"Upgrading"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"fileAbsolutePath":"/home/runner/work/developer-site/developer-site/.cache/gatsby-source-git/ia/version-1.2/documentation/run-ops/TOC.md","frontmatter":{"title":"System Requirements"}}},"pageContext":{"urlPrefix":"ia/version-1.2","absolutePath":"/home/runner/work/developer-site/developer-site/.cache/gatsby-source-git/ia/version-1.2/documentation/run-ops/backup-restore.md","tocRegex":"/(ia/)(version-1.2/)?(documentation/)?(run-ops/)?(backup-restore.md/)?(TOC.md)/ig","versions":[{"name":"version-1.5","displayName":"v1.5"},{"name":"version-1.4","displayName":"v1.4"},{"name":"version-1.2","displayName":"v1.2"}],"currentRepo":{"name":"ia","displayName":"Identity Analytics","description":"This guide provides a high-level overview of Identity Analytics. This documentation includes the user guides, integration guides for Identity Analytics along with the different modules included.","links":[{"text":"SEE SELF-MANAGED GUIDES","href":"/ia/version-1.4/#2"}],"remote":"https://github.com/radiantlogic-v8/documentation-ia-selfmanaged.git","patterns":["home-pages/**","documentation/**"],"deployBranches":[{"name":"version-1.5","displayName":"v1.5"},{"name":"version-1.4","displayName":"v1.4"},{"name":"version-1.2","displayName":"v1.2"}]},"currentRepoWebLink":"https://github.com/radiantlogic-v8/documentation-ia-selfmanaged","currentVersion":{"name":"version-1.2","displayName":"v1.2"},"title":"Backup and Restore","description":"Identity Analytics self-managed solution backup and restore guides","tocForCurrentSection":{"textElement":"Run ops","href":null,"children":[{"textElement":"Backup restore","href":"run-ops/backup-restore","children":[]},{"textElement":"Preface","href":"run-ops/preface","children":[]},{"textElement":"Purge","href":"run-ops/purge","children":[]},{"textElement":"Reconciliation","href":"run-ops/reconciliation","children":[]},{"textElement":"T O C","href":"run-ops/TOC","children":[]},{"textElement":"Upgrading","href":"run-ops/upgrading","children":[]}]}}},"staticQueryHashes":["63159454"],"slicesMap":{"footer":"footer","header":"header"}}