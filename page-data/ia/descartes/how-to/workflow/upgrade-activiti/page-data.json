{"componentChunkName":"component---src-templates-base-page-js","path":"/ia/descartes/how-to/workflow/upgrade-activiti/","result":{"data":{"pageContent":{"html":"<h1 id=\"how-to-upgrade-your-activiti-database\">How-To upgrade your activiti database</h1>\n<p>As of version 2016 R2 SP12 of the product, the version of the activiti engine has been updated to version 5.21. As a result when upgrading from a previous version of the product with active workflows it is necessary to upgrade the version of your activiti schema.</p>\n<h2 id=\"prerequisites\">Prerequisites</h2>\n<ul>\n<li>It is important that before performing any operations on your database instance you should have a working backup available.</li>\n<li>To be able to run the creation and the upgrade scripts the user must have the permission to alter the database.</li>\n<li>All instances of the portal must have been shutdown before performing the upgrade.</li>\n</ul>\n<blockquote>\n<p>The following operations are only required when and workflow database is declared in the technical configuration of the project.</p>\n</blockquote>\n<h2 id=\"dependencies\">Dependencies</h2>\n<p>This requires the use of a declared Activiti database in the technical configuration.</p>\n<h2 id=\"procedure\">Procedure</h2>\n<p>It is <strong>highly</strong> recommended to upgrade the schema of your activiti database using the sql scripts provided in the <code class=\"language-text\">activiti_upgrade</code> folder of the upgrade archive. The scripts are also attached to this page.</p>\n<p>In this folder there are two versions of activiti available to upgrade from. Use only the scripts corresponding to the current version of your schema used (either 5.14 or 5.16).</p>\n<p>Execute the following sql query in your database management platform to determine the version of activiti used :</p>\n\n          <codeblockcopytag>SELECT NAME_, VALUE_ FROM ACT_GE_PROPERTY WHERE NAME_ = 'schema.version' ;  </codeblockcopytag>\n          \n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> NAME_<span class=\"token punctuation\">,</span> VALUE_ <span class=\"token keyword\">FROM</span> ACT_GE_PROPERTY <span class=\"token keyword\">WHERE</span> NAME_ <span class=\"token operator\">=</span> <span class=\"token string\">'schema.version'</span> <span class=\"token punctuation\">;</span>  </code></pre></div>\n<p>The upgrade and creation scripts are provided for all three supported databases :</p>\n<ul>\n<li>Microsoft SQL server</li>\n<li>Oracle</li>\n<li>PostgreSQL</li>\n</ul>\n<blockquote>\n<p>[!warning] If you are using <strong>Microsoft SQL server</strong> it is important to execute the upgrade script with a user that has the <strong>ALTER DATABASE permission</strong> or the execution of the final query will result in an exception:</p>\n</blockquote>\n\n          <codeblockcopytag>declare @databasename varchar(256);\nSELECT @databasename = DB_NAME();\nexec('ALTER DATABASE ['+@databasename+'] SET READ_COMMITTED_SNAPSHOT ON WITH ROLLBACK IMMEDIATE');</codeblockcopytag>\n          \n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">declare</span> <span class=\"token variable\">@databasename</span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token variable\">@databasename</span> <span class=\"token operator\">=</span> DB_NAME<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ALTER DATABASE ['</span><span class=\"token operator\">+</span><span class=\"token variable\">@databasename</span><span class=\"token operator\">+</span><span class=\"token string\">'] SET READ_COMMITTED_SNAPSHOT ON WITH ROLLBACK IMMEDIATE'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{"id":"how-to-upgrade-your-activiti-database"},"children":[{"type":"text","value":"How-To upgrade your activiti database"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"As of version 2016 R2 SP12 of the product, the version of the activiti engine has been updated to version 5.21. As a result when upgrading from a previous version of the product with active workflows it is necessary to upgrade the version of your activiti schema."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"prerequisites"},"children":[{"type":"text","value":"Prerequisites"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"It is important that before performing any operations on your database instance you should have a working backup available."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"To be able to run the creation and the upgrade scripts the user must have the permission to alter the database."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"All instances of the portal must have been shutdown before performing the upgrade."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The following operations are only required when and workflow database is declared in the technical configuration of the project."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"dependencies"},"children":[{"type":"text","value":"Dependencies"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This requires the use of a declared Activiti database in the technical configuration."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"procedure"},"children":[{"type":"text","value":"Procedure"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It is "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"highly"}]},{"type":"text","value":" recommended to upgrade the schema of your activiti database using the sql scripts provided in the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"activiti_upgrade"}]},{"type":"text","value":" folder of the upgrade archive. The scripts are also attached to this page."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In this folder there are two versions of activiti available to upgrade from. Use only the scripts corresponding to the current version of your schema used (either 5.14 or 5.16)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Execute the following sql query in your database management platform to determine the version of activiti used :"}]},{"type":"text","value":"\n\n          "},{"type":"element","tagName":"codeblockcopytag","properties":{},"children":[{"type":"text","value":"SELECT NAME_, VALUE_ FROM ACT_GE_PROPERTY WHERE NAME_ = 'schema.version' ;  "}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" NAME_"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" VALUE_ "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" ACT_GE_PROPERTY "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"WHERE"}]},{"type":"text","value":" NAME_ "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'schema.version'"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The upgrade and creation scripts are provided for all three supported databases :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Microsoft SQL server"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Oracle"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"PostgreSQL"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"[!warning] If you are using "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Microsoft SQL server"}]},{"type":"text","value":" it is important to execute the upgrade script with a user that has the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"ALTER DATABASE permission"}]},{"type":"text","value":" or the execution of the final query will result in an exception:"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n\n          "},{"type":"element","tagName":"codeblockcopytag","properties":{},"children":[{"type":"text","value":"declare @databasename varchar(256);\nSELECT @databasename = DB_NAME();\nexec('ALTER DATABASE ['+@databasename+'] SET READ_COMMITTED_SNAPSHOT ON WITH ROLLBACK IMMEDIATE');"}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"declare"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"@databasename"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"varchar"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"256"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"@databasename"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" DB_NAME"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"exec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'ALTER DATABASE ['"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"@databasename"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'] SET READ_COMMITTED_SNAPSHOT ON WITH ROLLBACK IMMEDIATE'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]}],"data":{"quirksMode":false}},"fileAbsolutePath":"/home/runner/work/developer-site/developer-site/.cache/gatsby-source-git/ia/descartes/documentation/how-to/workflow/upgrade-activiti.md","frontmatter":{"title":"How-To upgrade your activiti database"},"headings":[{"id":"how-to-upgrade-your-activiti-database","value":"How-To upgrade your activiti database","depth":1},{"id":"prerequisites","value":"Prerequisites","depth":2},{"id":"dependencies","value":"Dependencies","depth":2},{"id":"procedure","value":"Procedure","depth":2}]},"toc":null},"pageContext":{"urlPrefix":"ia/descartes","absolutePath":"/home/runner/work/developer-site/developer-site/.cache/gatsby-source-git/ia/descartes/documentation/how-to/workflow/upgrade-activiti.md","tocRegex":"/(ia/)(descartes/)?(documentation/)?(how-to/)?(workflow/)?(upgrade-activiti.md/)?(TOC.md)/ig","versions":[{"name":"descartes","displayName":"Descartes"}],"currentRepo":{"name":"ia","displayName":"Identity Analytics","description":"This guide provides a high-level overview of Identity Analytics. This documentation includes the user guides, integration guides for Identity Analytics along with the different modules included.","links":[{"text":"SEE DEVELOPER DOCUMENTATION","href":"/ia/descartes/#1"}],"remote":"https://github.com/radiantlogic-v8/documentation-ia-product.git","patterns":["home-pages/**","documentation/**"],"deployBranches":[{"name":"descartes","displayName":"Descartes"}]},"currentRepoWebLink":"https://github.com/radiantlogic-v8/documentation-ia-product","currentVersion":{"name":"descartes","displayName":"Descartes"},"title":"How-To upgrade your activiti database","description":"How-To upgrade your activiti database","tocForCurrentSection":{"textElement":"How to","href":null,"children":[{"textElement":"Database","href":null,"children":[{"textElement":"Install sql server oracle jdbc drivers","href":"how-to/database/install-sql-server-oracle-jdbc-drivers","children":[]},{"textElement":"Oracle","href":null,"children":[{"textElement":"Install orcl driver","href":"how-to/database/oracle/install-orcl-driver","children":[]},{"textElement":"Performance investigation oracle","href":"how-to/database/oracle/performance-investigation-oracle","children":[]}]},{"textElement":"Postgresql","href":null,"children":[{"textElement":"Psql performance issue investigation","href":"how-to/database/postgresql/psql-performance-issue-investigation","children":[]}]},{"textElement":"Sqlserver","href":null,"children":[{"textElement":"Install sqlserver driver","href":"how-to/database/sqlserver/install-sqlserver-driver","children":[]},{"textElement":"Performance investigation sql server","href":"how-to/database/sqlserver/performance-investigation-sql-server","children":[]}]}]},{"textElement":"Workflow","href":null,"children":[{"textElement":"Reference timeslots","href":"how-to/workflow/reference-timeslots","children":[]},{"textElement":"Upgrade activiti","href":"how-to/workflow/upgrade-activiti","children":[]}]}]}}},"staticQueryHashes":["63159454"],"slicesMap":{"footer":"footer","header":"header"}}